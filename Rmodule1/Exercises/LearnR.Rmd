---
title: "How to Learn R"
author: "Sarah Manski"
date: "April 2023"
output: html_document
---
With updates by Katherine Muller, October 2025 - Quadri

```{r setup, include=FALSE}
# This is the setup chunk that includes some settings for your document
# Here "include = FALSE" means that you won't see this chunk when you knit your document

# The command below sets a global default option for the rest of the chunks where "echo = TRUE" so you will see both the code and results output, unless otherwise specified in the individual chunk header
knitr::opts_chunk$set(echo = TRUE)
```

## Exercise 1: Data manipulation and summary with dplyr

In this exercise, you are given an example of data manipulation using the tidyverse package dplyr.  In part (a), use strategic searching tips to find out what the code does and write out the steps in the code comments.  In part (b), you use the code from part (a) to solve a similar data manipulation task.


### 1a) Learning by example

```{r ex1a}
# Step 1:load the required packages
library(agridat)
library(tidyverse)

# Step 2:load the required dataset
data(ilri.sheep)

# Step 3:assigning an object name to the dataset
sheep <- ilri.sheep
?ilri.sheep

# Step 4:selecting observations from year 94 with available weanwt
sheep94 <- sheep %>% filter(year == 94, !is.na(weanwt)) 

# Step 5: Adding new column wtchange to our sheep94 
sheep94 <- sheep94 %>%
  mutate(wtchange = weanwt - birthwt)

# Step 6:summary statistics by genotype
sheepSummary <- sheep94 %>% group_by(gen) %>% summarize(mean_birthwt = mean(birthwt),
      mean_weanwt = mean(weanwt), mean_wtchange = mean(wtchange), n= n())

# Step 7:printing the first six rows of the dataset
head(sheep94)

# Step 8:remove objects from the environment
rm(sheep, sheep94, ilri.sheep)

```


### 1b) Adjusting examples to your needs
Suppose now you are given the following task, which requires similar data manipulation as the example in part (a).


Task: Using the functions from the tidyverse package dplyr and the dataset ilri.sheep from the agridat package, complete the following. For all male lambs with a recorded wean age, calculate the standard deviation and median wean age and ewe (dam) age and the maximum ewe (dam) age for each year and ewe genotype.  


Use the sample code from 1a and the steps written in the code chunk below to complete the above task. 

```{r ex1b}
# Step 1: Load required packages
library(agridat)
library(tidyverse)


# Step 2: Load required data and view its documentation
data(ilri.sheep)

?ilri.sheep

# Step 3: Copy the ilri.sheep data into a new object called sheep
sheep<- ilri.sheep

# Step 4: Filter data to only include male lambs with a recorded wean age

sheep_male<- sheep |> filter(sex=="M",!is.na(weanage))

# Step 5: Group data by year and ewe genotype
sheep_gen <- sheep_male |> group_by(year,ewegen)


# Step 6: Summarize data by calculating standard deviation and median for both wean age and dam age as well as maximum dam age

sheep_summary<- sheep_gen |> group_by(year,ewegen) |> summarize(std_dev_weanage = sd(weanage),
                                                             std_dev_damage = sd (damage),
                                                             med_weanage = median(weanage),
                                                             med_damage = median(damage),
                                                             max_damage = max(damage),
                                                             n=n(),
                                                             .groups = "keep")

# Step 7: Inspect the summarized data
head(sheep_summary)


# Step 8: Clear one or more objects from your working environment
rm(sheep,sheep_gen)

```



## Exercise 2: Plotting with ggplot2

In this exercise, you are given an example of plot creation using the tidyverse package ggplot2.  In part (a), use strategic searching tips to find out what the code does and write out the steps in the code comments.  In part (b), you use the code from part (a) to solve a similar data plotting task.


### 2a) Learning by example



```{r ex2a, warning = FALSE}
# Step 1: loading the required packages
library(agridat)
library(tidyverse)

# Step 2: loading the dataset and we are assigning an object name to it
data(ilri.sheep)
sheep <- ilri.sheep

# Step 3:adding the data into ggplot
ggplot(data = sheep) + 
  # Step 4: making a scatterplot of weanwt vs weanage and coloring them by gen
  geom_point(aes(x = weanage, y=weanwt, color = gen)) + 
  # Step 5: adding descriptive labels to the plot
  labs(x = "Lamb weaning age", y = "Lamb weaning weight", title = "Lamb weaning age and weight by genotype") +
  # Step 6: grouping the plot by year
  facet_wrap(~year)
```

### 2b) Adjusting examples to your needs

Suppose now you are given the following task, which requires similar data plotting as the example in part (a).


Task: Use the functions from the tidyverse package ggplot2 and the dataset ilri.sheep from the agridat package. Create scatter plots of birth weight vs wean weight grouped by lamb genotype, with appropriate axis labels and title, and where the shape of the points corresponds to the lamb sex and the opacity (alpha) of the points corresponds to lamb wean age.


Use the sample code from 2a and the steps written in the code chunk below to complete the above task. 



```{r ex2b, warning = FALSE}
# Step 1: Load required packages
library(agridat)
library(tidyverse)

# Step 2: Load required data and save
data(ilri.sheep)
sheep_data = ilri.sheep

# Step 3: Call ggplot with sheep data
ggplot(sheep_data) +

  # Step 4: Create a scatter plot with birth weight for x axis, wean weight for y axis, shape for sex and alpha for wean age
       geom_point(aes(x=birthwt,y=weanwt,shape = sex , alpha = weanage, color=sex)) +
  # Step 5: Include descriptive labels
       labs(x="birth weight",y="wean weight", title = "Scatterplot of wean weight vs birth weight of sheep") +
  # Step 6: Split plot by lamb genotype
  facet_wrap(~gen)
       
```



